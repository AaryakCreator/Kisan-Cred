datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Farmer {
  id                String   @id @default(cuid())
  name              String
  location          String
  region            String   @default("North")
  farmSize          Float    @default(0) @map("farm_size")
  crops             String[]
  walletAddress     String?  @map("wallet_address")
  status            String   @default("pending")
  score             Int      @default(50)
  dataHash          String?  @map("data_hash")
  registeredAt      DateTime @default(now()) @map("registered_at")
  lastActivity      DateTime @default(now()) @map("last_activity")
  irrigationType    String?  @map("irrigation_type")
  soilType          String?  @map("soil_type")
  annualIncome      Float?   @map("annual_income")
  phone             String?
  aadhaar           String?
  documentsVerified Int      @default(0) @map("documents_verified")
  documentsTotal    Int      @default(5) @map("documents_total")
  applications      LoanApplication[]

  @@map("farmers")
}

model LoanApplication {
  id          String   @id @default(cuid())
  farmerId    String   @map("farmer_id")
  loanId      String   @map("loan_id")
  loanName    String   @map("loan_name")
  provider    String
  amount      Float    @default(0)
  status      String   @default("submitted")
  appliedAt   DateTime @default(now()) @map("applied_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")

  farmer      Farmer   @relation(fields: [farmerId], references: [id])

  @@map("loan_applications")
}
